#!/usr/bin/env ruby

require "thor"
require_relative '../lib/asana_to_sig'

module AsanaToSig
  class AsanaToSigCLI < Thor
    desc "check_achievements_5mins ASANA_KEY USER_ID WORKSPACE_ID", "Checks the tasks done in the last 5 minutes and processes them"
    
    def check_achievements_5mins(asana_key, sig_user_id, workspace_id)
      check_completed(asana_key, sig_user_id, workspace_id, 5)
    end

    desc "check_completed", "Checks the tasks done in the last X minutes and processes them" 
    def check_completed(asana_key, sig_user_id, workspace_id, minutes)
      a2s = AsanaToSig.new(asana_key)
      a2s.sig_user_id = sig_user_id  
      a2s.workspace_id = workspace_id 
      a2s.get_from_last_given_minutes(minutes)
    end
  end
end
 
AsanaToSig::AsanaToSigCLI.start(ARGV)
